<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spacca 15</title>
    <style>
        /* Stile generale per il corpo */
        body { 
            font-family: Arial, sans-serif; 
            text-align: center; 
        }

        /* Stile per la griglia del gioco */
        .grid { 
            display: grid; 
            grid-template-columns: repeat(4, 50px); 
            gap: 5px; 
            justify-content: center; 
            margin-top: 20px;
        }

        /* Stile per le tessere */
        .tile { 
            width: 50px; 
            height: 50px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background: rgb(86, 175, 212); 
            border: 1px solid rgb(11, 231, 147); 
            font-size: 20px; 
            cursor: pointer;
        }

        /* Stile per la tessera vuota */
        .empty { 
            background: rgba(255, 255, 255, 0.505); 
            border: 1px solid gray; 
        }
    </style>
</head>
<body>
    <style type="text/css">
        /* Sfondo del gioco */
        body {
            background-image: URL("vecteezy_blue-green-abstract-background-with-net-or-line-texture_11870717.jpg");
            background-size: cover;
        }
    </style>
    <h1>Spacca 15</h1>
    <p>Ordina le tessere trascinandole nello spazio vuoto!</p>
    <p>Mosse effettuate: <span id="moveCount">0</span></p> <!-- Mostra il conteggio delle mosse -->

    <div class="grid" id="grid"></div> <!-- Contenitore della griglia -->

    <script>
        let moveCount = 0; // Variabile per contare le mosse effettuate
        const numbers = [...Array(15).keys()].map(n => n + 1); // Genera i numeri da 1 a 15
        numbers.push(null); // Aggiunge uno spazio vuoto alla fine
        shuffle(numbers); // Mescola i numeri per iniziare il gioco

        // Funzione per mescolare un array
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Scambia due elementi
            }
        }

        // Funzione per disegnare la griglia
        function renderGrid() {
            const grid = document.getElementById("grid"); // Seleziona il contenitore della griglia
            grid.innerHTML = ""; // Svuota la griglia
            numbers.forEach((num, i) => {
                const tile = document.createElement("div"); // Crea un elemento per ogni tessera
                tile.className = "tile"; // Aggiunge la classe "tile"
                if (num === null) {
                    tile.classList.add("empty"); // Aggiunge la classe "empty" per la tessera vuota
                } else {
                    tile.textContent = num; // Imposta il numero sulla tessera
                    tile.addEventListener("click", () => moveTile(i)); // Aggiunge l'evento click per spostare la tessera
                }
                grid.appendChild(tile); // Aggiunge la tessera alla griglia
            });
        }

        // Funzione per spostare una tessera
        function moveTile(index) {
            const emptyIndex = numbers.indexOf(null); // Trova l'indice della tessera vuota
            const validMoves = [emptyIndex - 1, emptyIndex + 1, emptyIndex - 4, emptyIndex + 4]; // Calcola le mosse valide

            if (validMoves.includes(index)) { // Controlla se la mossa Ã¨ valida
                [numbers[index], numbers[emptyIndex]] = [numbers[emptyIndex], numbers[index]]; // Scambia la tessera con quella vuota
                moveCount++; // Incrementa il conteggio delle mosse
                document.getElementById("moveCount").textContent = moveCount; // Aggiorna il conteggio sullo schermo
                renderGrid(); // Ridisegna la griglia
                checkWin(); // Controlla se il giocatore ha vinto
            }
        }

        // Funzione per controllare se il giocatore ha vinto
        function checkWin() {
            if (numbers.slice(0, 15).every((num, i) => num === i + 1)) { // Controlla se i numeri sono in ordine
                setTimeout(() => alert(`Hai vinto! Mosse effettuate: ${moveCount}`), 100); // Mostra un messaggio di vittoria
            }
        }

        renderGrid(); // Disegna la griglia iniziale
    </script>
</body>
</html>